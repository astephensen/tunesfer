<LinkTo @route="application"><BackButton /></LinkTo>

<PlaylistInfo
  @image={{this.model.playlist.images.firstObject.url}}
  @name={{this.model.playlist.name}}
  @description={{this.model.playlist.description}}
  @author={{this.model.playlist.owner.display_name}}
>
  {{#if this.processing}}
    <MusicButton @title="Cancel" @hideImage={{true}} @action={{this.cancel}}/>
  {{else}}
    <MusicButton @title="Add to Apple Music" @action={{this.addPlaylist}}/>
  {{/if}}
</PlaylistInfo>

{{#if this.processing}}
  <div local-class="info-container">
    <InfoBar @text="This playlist is being added to your Apple Music library. You will need to keep this page open until it is done." />
  </div>
{{/if}}

<div local-class="track-list">
  {{#each this.model.playlist.tracks.items as |trackItem trackIndex|}}
    <Track
      @index={{add-one trackIndex}}
      @name={{trackItem.track.name}}
      @artist={{trackItem.track.artists.firstObject.name}}
      @album={{trackItem.track.album.name}}
      @duration={{format-milliseconds trackItem.track.duration_ms}}
      @state={{trackItem.state}}
    />
  {{/each}}
</div>
